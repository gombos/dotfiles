vmType: vz
arch: aarch64
images:
    - location: https://github.com/abiosoft/colima-ubuntu/releases/download/v0.6.0/ubuntu-23.10-minimal-cloudimg-arm64.img
      arch: aarch64
      digest: sha512:a45cbba1e3ce8968aa103a8a1ff276905a5013c3b6e25050426f66d2b7c6b30067dfccc900bbadb132d867bb17cf395cb5e89119e1614d3feea24021f6718921
    - location: https://github.com/abiosoft/colima-ubuntu/releases/download/v0.6.0/ubuntu-23.10-minimal-cloudimg-amd64.img
      arch: x86_64
      digest: sha512:ff16319abfd9b5e81395b0d0e7058a61b4bbd057fbab40fe654fb38cac1ed53b53a6a6d4c8ad10802f800daf5e069597e89ec2b2d360dbbc1dc44d0c2b1372fa
cpus: 2
memory: 2GiB
disk: 10GiB
mounts:
    - location: "~"
      writable: true
    - location: /tmp/colima
      writable: true
mountType: virtiofs
ssh:
    loadDotSSHPubKeys: false
    forwardAgent: false
containerd:
    system: false
    user: false
dns: []
firmware:
    legacyBIOS: false
hostResolver:
    enabled: true
    hosts:
        host.docker.internal: host.lima.internal
portForwards:
    - guestPortRange:
        - 0
        - 0
      guestSocket: /var/run/docker.sock
      hostPortRange:
        - 0
        - 0
      hostSocket: /Users/user/.colima/default/docker.sock
      proto: tcp
    - guestPortRange:
        - 0
        - 0
      guestSocket: /var/run/docker.sock
      hostPortRange:
        - 0
        - 0
      hostSocket: /Users/user/.colima/docker.sock
      proto: tcp
    - guestIPMustBeZero: true
      guestIP: 0.0.0.0
      guestPortRange:
        - 1
        - 65535
      hostIP: 0.0.0.0
      hostPortRange:
        - 1
        - 65535
      proto: tcp
    - guestIP: 127.0.0.1
      guestPortRange:
        - 1
        - 65535
      hostIP: 127.0.0.1
      hostPortRange:
        - 1
        - 65535
      proto: tcp
networks:
    - lima: user-v2
    - vzNAT: true
      interface: col0
provision:
    - mode: system
      script: sysctl -w fs.inotify.max_user_watches=1048576
    - mode: dependency
      script: groupadd -f docker && usermod -aG docker $LIMA_CIDATA_USER
    - mode: system
      script: hostnamectl set-hostname colima
    - mode: system
      script: mount -a
    - mode: system
      script: readlink /usr/sbin/fstrim || fstrim -a
