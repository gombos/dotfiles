#need to run as root

cd /tmp
wget https://nixos.org/nix/install
chmod +x install

rm -rf /nix/*

USER=root ./install --no-daemon
rm install

. ~/.nix-profile/etc/profile.d/nix.sh

export NIX_PATH=nixpkgs=/root/.nix-defexpr/channels/nixpkgs:/root/.nix-defexpr/channels
export NIX_SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
export PATH=/root/.nix-profile/bin:$PATH

nix-channel --update
nix-channel --list

nix-env --install micro
nix-env --query

nix-channel --remove nixpkgs

nix-channel --add https://nixos.org/channels/nixos-21.05 nixpkgs

nix-channel --update

nix-env --install ripgrep-all rclone node_bitwarden-cli micro kubernetes apfs-fuse-unstable

NIXPKGS_ALLOW_UNFREE=1 nix-env --install  vscode google-chrome

nix-env -u

nix-collect-garbage -d

wget https://download.kde.org/stable/digikam/7.3.0/digiKam-7.3.0-x86-64.appimage -O /usr/local/bin/digikam
chmod +x /usr/local/bin/digikam
